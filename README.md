# chisel-nbdev template
Use this template to more easily create your [chisel_nbdev](https://github.com/ucsc-vama/chisel_nbdev) project.

- Note: This repo is a fork of the [nbdev_template](https://github.com/fastai/nbdev_template) repo.

A detailed explantation to get started can be found from the original nbdev documentation: [here](https://nbdev.fast.ai/tutorial.html#Set-up-Repo)

## Recommended setup:
- setup some virtualenv (im using python3.8.2)
  - `pip install virtualenv`
  - find your python3 binary: `which python3` which for me is `/usr/local/bin/python3`
  - create the virtualenv`python3 -m virtualenv --python=/usr/local/bin/python3 chisel_nb_env`
- activate virtualenv: `source chisel_nb_env/bin/activate`
- install chisel-nbdev: `pip install -U chisel-nbdev`
- install Jupyter: `pip install jupyterlab`

### Setup the Jupyter Scala kernel Almond (https://almond.sh) 
- Borrowed from the Chisel-Bootcamp install guide: https://github.com/freechipsproject/chisel-bootcamp/blob/master/Install.md
- If you experience errors or issues with this section, try running `rm -rf ~/.local/share/jupyter/kernels/scala/` first.
- Next, download coursier (our dependency manager) and use it to install almond (our kernel wrapped around Ammonite) (see here for the source for these instructions):
```
curl -L -o coursier https://git.io/coursier-cli && chmod +x coursier
SCALA_VERSION=2.12.10 ALMOND_VERSION=0.9.1
./coursier bootstrap -r jitpack \
    -i user -I user:sh.almond:scala-kernel-api_$SCALA_VERSION:$ALMOND_VERSION \
    sh.almond:scala-kernel_$SCALA_VERSION:$ALMOND_VERSION \
    --sources --default=true \
    -o almond
./almond --install
```
- You can delete coursier and almond files if you so desire.
 
### Start JupyterLab
- Making sure you have activated your virtualenv then run in terminal: ```jupyter lab```
- Modify `settings.ini` following instructions [here](https://nbdev.fast.ai/tutorial.html#Set-up-Repo) then run `chisel_nbdev_build_lib && chisel_nbdev_clean_nbs && chisel_nbdev_build_docs`. 

## Troubleshooting Tips

-  Make sure you are using the latest version of chisel-nbdev with `pip install -U chisel-nbdev`
-  It is important for you to spell the name of your user and repo correctly in `settings.ini` or the website will not have the correct address from which to source assets like CSS for your site.  When in doubt, you can open your browser's developer console and see if there are any errors related to fetching assets for your website due to an incorrect URL generated by misspelled values from `settings.ini`.
-  If you change the name of your repo, you have to make the appropriate changes in `settings.ini`
-  After you make changes to `settings.ini`, run `chisel_nbdev_build_lib && chisel_nbdev_clean_nbs && chisel_nbdev_build_docs` to make sure all changes are propagated appropriately.

